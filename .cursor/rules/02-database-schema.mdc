---
description:
globs:
alwaysApply: false
---
# Database Schema

## Connection Information
- **Engine**: MySQL
- **Host**: 127.0.0.1
- **Port**: 3306
- **Username**: root
- **Password**: Himlam04@
- **Database**: FootballField

## Entity Relationship Diagram
```
┌────────────┐       ┌────────────┐       ┌────────────┐
│   Users    │       │   Fields   │       │  Products  │
├────────────┤       ├────────────┤       ├────────────┤
│ id (PK)    │       │ id (PK)    │       │ id (PK)    │
│ email      │◄──┐   │ name       │       │ name       │
│ password   │   │   │ location   │       │ description│
│ username   │   │   │ size       │   ┌──►│ price      │
│ role       │   │   │ hourly_rate│   │   │ image_url  │
│ created_at │   │   │ status     │   │   │ category   │
│ updated_at │   │   │ image_url  │   │   │ created_at │
└────────────┘   │   │ created_at │   │   │ updated_at │
                 │   │ updated_at │   │   └────────────┘
                 │   └────────────┘   │
                 │         ▲          │
                 │         │          │
            ┌────┴─────────┴──────────┴────┐
            │           Bookings           │
            ├─────────────────────────────┬┤
            │ id (PK)                     ││
            │ user_id (FK)                ││
            │ field_id (FK)               ││
            │ booking_date                ││
            │ start_time                  ││
            │ end_time                    ││
            │ status                      ││
            │ total_price                 ││
            │ payment_status              ││
            │ payment_method              ││
            │ product_id (FK)             ││
            │ created_at                  ││
            │ updated_at                  ││
            └─────────────────────────────┘│
                           ▲               │
                           │               │
                ┌──────────┴───────────┐   │
                │        Feedback      │   │
                ├──────────────────────┤   │
                │ id (PK)              │   │
                │ booking_id (FK)      │   │
                │ rating               │   │
                │ comment              │   │
                │ created_at           │   │
                │ updated_at           │   │
                └──────────────────────┘   │
                                           │
                ┌───────────────────────┐  │
                │      Opponents        │  │
                ├───────────────────────┤  │
                │ id (PK)               │  │
                │ booking_id (FK)       │◄─┘
                │ team_name             │
                │ contact_email         │
                │ contact_phone         │
                │ description           │
                │ status                │
                │ created_at            │
                │ updated_at            │
                └───────────────────────┘
```

## Tables and Relationships

### Users
- Primary key: id
- Relationships:
  - Has many Bookings (one-to-many)
- Key fields:
  - email (unique)
  - password (hashed)
  - role (enum: 'user', 'admin')

### Fields
- Primary key: id
- Relationships:
  - Has many Bookings (one-to-many)
- Key fields:
  - name
  - status (enum: 'available', 'maintenance', 'booked')
  - hourly_rate (decimal)
  - size (varchar - e.g., "5-a-side", "11-a-side")

### Products
- Primary key: id
- Relationships:
  - Used in many Bookings (one-to-many)
- Key fields:
  - name
  - price (decimal)
  - category (enum: 'equipment', 'refreshment', 'service')

### Bookings
- Primary key: id
- Relationships:
  - Belongs to User (many-to-one)
  - Belongs to Field (many-to-one)
  - Has one Feedback (one-to-one)
  - Has many Products (many-to-many through booking_products)
  - Has one Opponent request (one-to-one)
- Key fields:
  - booking_date (date)
  - start_time (time)
  - end_time (time)
  - status (enum: 'pending', 'confirmed', 'cancelled', 'completed')
  - payment_status (enum: 'pending', 'paid', 'refunded')

### Feedback
- Primary key: id
- Relationships:
  - Belongs to Booking (one-to-one)
- Key fields:
  - rating (int, 1-5)
  - comment (text)

### Opponents
- Primary key: id
- Relationships:
  - Belongs to Booking (one-to-one)
- Key fields:
  - team_name
  - status (enum: 'searching', 'matched', 'cancelled')
  - description

## Database Initialization
Database initialization scripts should:
1. Create all tables with proper constraints
2. Set up foreign key relationships
3. Create indexes for frequently queried columns
4. Seed initial data for testing
5. Set up stored procedures for complex operations
